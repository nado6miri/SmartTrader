<style>
    .tb_default {
        width: 1100px;
        border: 1px solid;
    }
    .linkarea {

    }
</style>

<!-- tab style -->
<style>
    .tabWrap { width: 1000px; height: 700px; }
    .tab_Menu { margin: 0px; padding: 0px; list-style: none; }
    .tabMenu { width: 150px; margin: 0px; text-align: center;
                padding-top: 10px; padding-bottom: 10px; float: left; }
    .tabMenu a { color: #000000; font-weight: bold; text-decoration: none; }
    .current { background-color: #FFFFFF;
                border: 1px solid blue; border-bottom:hidden; }
    .tabPage { width: 900px; height: 600px; float: left;
                border: 1px solid blue; }
</style>

<!-- table style -->
<style>
    .custom_table {
        display : inline;
        width : 100%;
        border-collapse : collapse;
        border-spacing : 0px 0px;
        border : 1px solid #7f7f7f;
        text-align : center;
    }

    .custom_table tbody {
        height : 100px;
        overflow : auto;
    }

    .custom_table th {
        padding : 0px;
        spacing : 0px;
        border : 1px solid #7f7f7f;
        text-align : center;
    }
    .custom_table td {
        padding : 0px;
        spacing : 0px;
        border : 1px solid #7f7f7f;
        text-align : center;
    }
    .custom_table tr {
        padding : 0px;
        spacing : 0px;
        border : 1px solid #7f7f7f;
        text-align : center;
    }


    .div_div2_left {
        width: 50%;
        float: left;
        box-sizing: border-box;
        background: rgb(255, 255, 255);
    }
    .div_div2_middle {
        width: 50%;
        float: left;
        box-sizing: border-box;
        background: rgb(255, 255, 255);
    }

    .div_div3_left {
        width: 25%;
        float: left;
        box-sizing: border-box;
        background: rgb(255, 255, 255);
    }
    .div_div3_middle {
        width: 25%;
        float: left;
        box-sizing: border-box;
        background: rgb(255, 255, 255);
    }
    .div_div3_right {
        width: 50%;
        float: left;
        box-sizing: border-box;
        background: rgb(255, 255, 255);
    }
    </style>
</style>

<html>
    <head>
    <title></title>
    <meta charset="utf-8">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <!-- for google chart -->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    </head>
    <body>
        <!-- Portfolio Table 
        <hr style="height: 4px; border: 2px outset #c8ccca; background-color: #eb3c1d"/>
        <table id="PortfolioTable" class=custom_table>
            <thead id="PortfolioTable_head">
                <tr>
                    <th colspan="11" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold">포트폴리오 구성</th>
                </tr>
                <tr>
                    <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> No</th>
                    <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> Market</th>
                    <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> ID</th>
                    <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> Trade Mode</th>
                    <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> Config Index</th>
                    <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> P_Min</th>
                    <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> P_Max</th>
                    <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> P_Start</th>
                    <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> P_Step</th>
                    <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> P_Start_Direction</th>
                    <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> Trade 적용</th>
                </tr>
            </thead>
            <tbody id="PortfolioTable_body">
            </tbody>
        </table>
        -->
        <!-- Overall Summary Table -->
        <hr style="height: 4px; border: 2px outset #c8ccca; background-color: #eb3c1d"/>
        <div id="overall_summary" style="width:100%; height:220px">
            <div id="overall_summary_left" class=div_div2_left>
                <table id="BalanceTable" class=custom_table>
                    <thead id="Balance_head">
                        <tr>
                            <th colspan="8" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold">Trader 잔고 확인</th>
                        </tr>
                        <tr>
                            <th rowspan="1" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:100px"> 종목</th>
                            <th rowspan="1" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:120px"> 보유수량</th>
                            <th rowspan="1" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:100px"> 평단가</th>
                            <th rowspan="1" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:120px"> 투자금액</th>
                            <th rowspan="1" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:120px"> 현재가격</th>
                            <th rowspan="1" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:120px"> 평가금액</th>
                            <th rowspan="1" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:100px"> 손익</th>
                            <th rowspan="1" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:120px"> 손익비율</th>
                        </tr>
                    </thead>
                    <tbody id="Balance_body">
                        <tr id="Balance_1" style="height:20px"></tr>
                        <tr id="Balance_2" style="height:20px"></tr>
                        <tr id="Balance_3" style="height:20px"></tr>
                        <tr id="Balance_4" style="height:20px"></tr>
                        <tr id="Balance_5" style="height:20px"></tr>
                        <tr id="Balance_6" style="height:20px"></tr>
                        <tr id="Balance_7" style="height:20px"></tr>
                    </tbody>
                    <tfoot id="Balance_foot">
                        <tr>
                            <td colspan = "3">Summary (요약)</td>
                            <td id = "BAL1">-</td>
                            <td id = "BAL2">-</td>
                            <td id = "BAL3">-</td>
                            <td id = "BAL4">-</td>
                            <td id = "BAL5">-</td>
                        </tr>
                    </tfoot>
                </table>
            </div>
            <div id="overall_summary_right" class=div_div2_right>
                <table id="EvaluationTable" class=custom_table>
                    <thead id="Evaluation_head">
                        <tr>
                            <th rowspan="2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:40px"">No</th>
                            <th rowspan="2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:100px"">종목</th>
                            <th rowspan="2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:40px"">ID</th>
                            <th colspan="2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold">익절이익</th>
                            <th colspan="2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold">SEED비용</th>
                            <th colspan="2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold">최종평가이익</th>
                        </tr>
                        <tr>
                            <th rowspan="1" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:120px"> 원화(KRW)</th>
                            <th rowspan="1" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:100px"> Coin</th>
                            <th rowspan="1" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:120px"> 원화(KRW)</th>
                            <th rowspan="1" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:100px"> Coin</th>
                            <th rowspan="1" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:120px"> 원화(KRW)</th>
                            <th rowspan="1" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:100px"> Coin</th>
                        </tr>
                    </thead>
                    <tbody id="Evaluation_body">
                        <tr id="Evaluation_1"></tr>
                        <tr id="Evaluation_2"></tr>
                        <tr id="Evaluation_3"></tr>
                        <tr id="Evaluation_4"></tr>
                        <tr id="Evaluation_5"></tr>
                        <tr id="Evaluation_6"></tr>
                        <tr id="Evaluation_7"></tr>
                    </tbody>
                    <tfoot id="Evaluation_foot">
                        <tr>
                            <td colspan = "3">최종 Trader실적</td>
                            <td id = "FEV1">-</td>
                            <td id = "FEV2">-</td>
                            <td id = "FEV3">-</td>
                            <td id = "FEV4">-</td>
                            <td id = "FEV5">-</td>
                            <td id = "FEV6">-</td>
                        </tr>
                        <tr>
                            <td colspan="7">현재가 기준 최종 Trader 원화 환산 실적</td>
                            <td colspan="2" id = "FFEV">0</td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>

        <!-- Configuration Table -->
        <hr style="height: 4px; border: 2px outset #c8ccca; background-color: #eb3c1d"/>
        <table id="ConfigTable" class=custom_table>
            <thead id="ConfigTable_head">
                <tr>
                    <th colspan="25" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold">Trader Configuration 설정 및 적용</th>
                </tr>
                <tr>
                    <th rowspan="2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> 종목</th>
                    <th rowspan="2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> ID</th>
                    <th rowspan="2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> 동작모드</th>
                    <th rowspan="2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> Algorithm</th>
                    <th rowspan="2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> 기준가격</th>
                    <th rowspan="2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> Status</th>
                    <th rowspan="2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> 동작주기</th>
                    <th rowspan="2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> New Slot(%)</th>
                    <th rowspan="2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> Add BidAsk(%)</th>
                    <th rowspan="2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> 수익실현(%)</th>
                    <th rowspan="2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> Max Slot</th>
                    <th rowspan="2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> Max BidAsk</th>
                    <th rowspan="2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> KRW 제한</th>
                    <th rowspan="2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> Coin 제한</th>
                    <th colspan="10" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> 투입비중(KRW(천원) or Coin</th>
                    <th rowspan="2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> 설정값적용</th>
                </tr>
                <tr>
                    <th id="BidAsk0" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold">0</th>
                    <th id="BidAsk1" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold">1</th>
                    <th id="BidAsk2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold">2</th>
                    <th id="BidAsk3" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold">3</th>
                    <th id="BidAsk4" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold">4</th>
                    <th id="BidAsk5" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold">5</th>
                    <th id="BidAsk6" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold">6</th>
                    <th id="BidAsk7" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold">7</th>
                    <th id="BidAsk8" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold">8</th>
                    <th id="BidAsk9" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold">9</th>
                </tr>
            </thead>
            <tbody id="ConfigTable_body">
                <tr id="market_1">
                    <!--
                    <td>EOS</td><td>1</td><td>Reverse</td><td>run</td><td>15</td><td>2</td><td>10</td><td>1</td><td>30</td><td>5</td><td>10,000,000</td><td>1000</td><td>1</td><td>8,000</td>
                    <td>20</td><td>20</td><td>20</td><td>20</td><td>20</td><td>20</td><td>20</td><td>20</td><td>20</td><td>20</td> -->
                </tr>
                <tr id="market_2"></tr>
                <tr id="market_3"></tr>
                <tr id="market_4"></tr>
                <tr id="market_5"></tr>
                <tr id="market_6"></tr>
                <tr id="market_7"></tr>
                <tr id="market_8"></tr>
                <tr id="market_9"></tr>
                <tr id="market_10"></tr>
            </tbody>
        </table>

        <!-- Trading Summary Table -->
        <hr style="height: 4px; border: 2px outset #c8ccca; background-color: #eb3c1d"/>
        <table id="TradingSummaryTable" class=custom_table>
            <thead id="TradingSummary_head">
                <tr>
                    <th colspan="20" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold">트레이딩 요약</th>
                </tr>
                <tr>
                    <th rowspan = "2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> No</th>
                    <th rowspan = "2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> 종목</th>
                    <th rowspan = "2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> ID</th>
                    <th rowspan = "2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> 동작모드</th>
                    <th rowspan = "2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> 거래 시작일시</th>
                    <th rowspan = "2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> 익절 횟수</th>
                    <th rowspan = "2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> SEED Slots</th>
                    <th colspan = "4" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> Normal Mode</th>
                    <th colspan = "4" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> Reverse Mode</th>
                    <th rowspan = "2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> 이익율(%)</th>
                    <th rowspan = "2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> 최종 거래가격</th>
                    <th rowspan = "2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> 현재 가격</th>
                    <th rowspan = "2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> Gap(%)</th>
                    <th rowspan = "2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> Trade별 상세정보</th>
                </tr>
                <tr>
                    <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> Coin 매입개수 </th>
                    <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> Coin 매입평단가</th>
                    <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> Coin 매입금액</th>
                    <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> KRW 이익</th>
                    <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> Coin 매도개수 </th>
                    <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> Coin 매도평단가</th>
                    <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> KRW 회수금액</th>
                    <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> Coin 이익</th>
                </tr>
    
            </thead>
            <tbody id="TradingSummary_body"></tbody>
            <tfoot id="TradingSummary_foot"><tr>
                <td colspan = "5">Sum</td>
                <td id = "TS1">-</td>
                <td id = "TS2">-</td>
                <td id = "TS3">-</td>
                <td id = "TS4">-</td>
                <td id = "TS5">-</td>
                <td id = "TS6">-</td>
                <td id = "TS7">-</td>
                <td id = "TS8">-</td>
                <td id = "TS9">-</td>
                <td id = "TS10">-</td>
                <td id = "TS11">-</td>
                <td id = "TS12">-</td>
                <td id = "TS13">-</td>
                <td id = "TS14">-</td>
                <td id = "TS15">-</td>
            </tr></tfoot>
        </table>

        <hr style="height: 2px; border: 1px outset #c8ccca; background-color: #2aff05"/>
        <div id="tr_detail_div" style="overflow : auto; width: 100%; height: 250px; background-color: #ffffff; border: 2px solid rgb(255, 255, 255);">
            <!-- Trading Detail Table -->
            <table id="TradingDetailTable" class=custom_table>
                <thead id="TradingDetail_head">
                    <tr>
                        <th colspan="19" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold">트레이딩 상세 정보</th>
                    </tr>
                    <tr>
                        <th rowspan = "2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> No</th>
                        <th rowspan = "2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:70px"> 종목</th>
                        <th rowspan = "2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:30px"> ID</th>
                        <th rowspan = "2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:70px"> 동작모드</th>
                        <th rowspan = "2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:190px"> 거래일시</th>
                        <th rowspan = "2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:70px"> Slot No</th>
                        <th rowspan = "2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:90px"> BidAsk Cnt</th>
                        <th colspan = "4" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> Normal Mode</th>
                        <th colspan = "4" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> Reverse Mode</th>
                        <th rowspan = "2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:80px"> 이익율(%)</th>
                        <th rowspan = "2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:100px"> 최종 거래가</th>
                        <th rowspan = "2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:80px"> 현재가</th>
                        <th rowspan = "2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:80px"> Gap(%)</th>
                    </tr>
                    <tr>
                        <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:120px"> Coin 매입개수 </th>
                        <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:120px"> Coin 매입평단가</th>
                        <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:120px"> Coin 매입금액</th>
                        <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:90px"> KRW 이익</th>
                        <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:120px"> Coin 매도개수 </th>
                        <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:120px"> Coin 매도평단가</th>
                        <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:120px"> KRW 회수금액</th>
                        <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:90px"> Coin 이익</th>
                    </tr>
                </thead>
                <tbody id="TradingDetail_body"></tbody>
            </table>
        </div>


        <!-- Income Summary Table -->
        <hr style="height: 4px; border: 2px outset #c8ccca; background-color: #eb3c1d"/>
        <table id="IncomeSummaryTable" class=custom_table>
            <thead id="IncomeSummary_head">
                <tr>
                    <th colspan="14" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold">익절 정보 요약</th>
                </tr>
                <tr>
                    <th rowspan = "2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> No</th>
                    <th rowspan = "2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> 종목</th>
                    <th rowspan = "2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> ID</th>
                    <th rowspan = "2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> 동작모드</th>
                    <th rowspan = "2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> 거래일시</th>
                    <th colspan = "3" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> Normal Mode</th>
                    <th colspan = "3" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> Reverse Mode</th>
                    <th rowspan = "2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> 이익율(%)</th>
                    <th rowspan = "2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> Detail Info</th>
                </tr>
                <tr>
                    <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:200px"> 총 투자금액(KRW)</th>
                    <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:200px"> 현 평가금액(KRW)</th>
                    <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:200px"> 이익 금액(KRW)</th>
                    <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:200px"> 매도 Coin 합계</th>
                    <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:200px"> 재매수 Coin 합계</th>
                    <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:200px"> Coin 증가 합계</th>
                </tr>
            </thead>
            <tbody id="IncomeSummary_body"></tbody>
            <tfoot id="IncomeSummary_foot"><tr>
                <td colspan = "5">Sum</td>
                <td id = "NI1">-</td>
                <td id = "NI2">-</td>
                <td id = "NI3">-</td>
                <td id = "NI4">-</td>
                <td id = "NI5">-</td>
                <td id = "NI6">-</td>
                <td id = "NI7">-</td>
                <td id = "NI8">-</td>
            </tr></tfoot>
        </table>

        
        <hr style="height: 2px; border: 1px outset #c8ccca; background-color: #2aff05"/>
        <!-- Income Detail Table -->
        <div id="setperiod">
            <div id="period_start" class="div_div3_left">시작 : <input type="date" id="startdate" value="2019-06-01"></div>
            <div id="period_end" class="div_div3_middle">종료 : <input type="date" id="enddate" value="2019-07-02"></div>
            <div id="period_desc" class="div_div3_right"> ------ </div>
        </div>
        <div id="netincom_detail_div" style="overflow : auto; width: 100%; height: 700px; background-color: #ffffff; border: 2px solid rgb(255, 255, 255);">
            <table id="IncomeDetailTable" class=custom_table>
                <thead id="IncomeDetail_head">
                    <tr>
                        <th colspan="18" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold">익절 상세 정보</th>
                    </tr>
                    <tr>
                        <th rowspan = "2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> No</th>
                        <th rowspan = "2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:70px"> 종목</th>
                        <th rowspan = "2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:30px"> ID</th>
                        <th rowspan = "2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:70px"> 동작모드</th>
                        <th rowspan = "2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:190px"> 거래일시</th>
                        <th rowspan = "2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:70px"> Slot No</th>
                        <th rowspan = "2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:90px"> BidAsk Cnt</th>
                        <th colspan = "5" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> Normal Mode</th>
                        <th colspan = "5" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold"> Reverse Mode</th>
                        <th rowspan = "2" style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:90px"> 이익율(%)</th>
                    </tr>
                    <tr>
                        <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:120px"> Coin 매입개수 </th>
                        <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:120px"> Coin 매입평단가</th>
                        <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:120px"> Coin 매입금액</th>
                        <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:120px"> Coin 매도금액</th>
                        <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:90px"> KRW 이익</th>
                        <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:120px"> Coin 매도개수 </th>
                        <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:120px"> Coin 매도평단가</th>
                        <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:120px"> KRW 회수금액</th>
                        <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:130px"> Coin 재매수 수량</th>
                        <th style="text-align: center; background-color: rgb(217,217,217); font-weight: bold; width:90px"> Coin 이익</th>
                    </tr>
                </thead>
                <tbody id="IncomeDetail_body"></tbody>
                <tfoot><tr>
                    <td colspan="6">SUM</td>
                    <td id="NID1">-</td>
                    <td id="NID2">1</td>
                    <td id="NID3">-</td>
                    <td id="NID4">-</td>
                    <td id="NID5">-</td>
                    <td id="NID6">-</td>
                    <td id="NID7">-</td>
                    <td id="NID8">-</td>
                    <td id="NID9">-</td>
                    <td id="NID10">-</td>
                    <td id="NID11">-</td>
                    <td id="NID12">-</td>
                </tr></tfoot>
            </table>
        </div>
    </body>
</html>


<!--
    JQUERY : https://www.w3schools.com/jquery/default.asp
    Jquery Selector
    1. Element Selector : $("tag") - $("body"), $("p")
    2. #id Selector : $("#idname") - $("#button1")
    3. .class Selector : $(".classname") - $(".clsname")
    $("*")	Selects all elements	
    $(this)	Selects the current HTML element	
    $("p.intro")	Selects all <p> elements with class="intro"	
    $("p:first")	Selects the first <p> element	
    $("ul li:first")	Selects the first <li> element of the first <ul>	
    $("ul li:first-child")	Selects the first <li> element of every <ul>	
    $("[href]")	Selects all elements with an href attribute	
    $("a[target='_blank']")	Selects all <a> elements with a target attribute value equal to "_blank"	
    $("a[target!='_blank']")	Selects all <a> elements with a target attribute value NOT equal to "_blank"	
    $(":button")	Selects all <button> elements and <input> elements of type="button"	
    $("tr:even")	Selects all even <tr> elements	
    $("tr:odd")	    Selects all odd <tr> elements

    object define
    var obj = $('<tagname>')
    obj.css().attr().attr()
-->

<script type="text/javascript">
    var pf = {}; 
    var config_filename = {};
    var tr_summary = {};
    var ni_summary = {};

    //$(document).ready(function() {  // long syntax
    $(function() {        // short syntax
        //Create_PortfolioTable("PortfolioTable_body");
        Create_BalanceTable("Balance_body");
        Create_ConfigTable("ConfigTable_body");
    });

    function buttton1_handler()
    {
        alert("Hello world!!!!");
    }

    function setDivLinks()
    {
        $('div.linkarea').each(function(){
            let link = $(this).attr("clicklink");
            if(link != undefined && link != "")
            {
                $(this).css("cursor", "pointer").click(function(){
                    window.open($(this).attr("clicklink"));
                })
            }
        });
    }


    
    async function Create_BalanceTable(table_bodyID)
    {
        let xlabel = ["1", "2", "3", "4", "5", "6", "7", "8" ];
        let ylabel = ["bal1", "bal2", "bal3", "bal4", "bal5", "bal6", "bal7" ];
        let index = 0;
        let selecterID = "#" + table_bodyID + " > tr";

        $(selecterID).each(function () {
            createTds(index++, $(this), table_bodyID, xlabel, ylabel);
        });

        let balance = [{"currency":"KRW","balance":"6337910.99497943","locked":"0.0","avg_buy_price":"0","avg_buy_price_modified":true,"unit_currency":"KRW","avg_krw_buy_price":"0","modified":true},{"currency":"XRP","balance":"10.0","locked":"0.0","avg_buy_price":"483","avg_buy_price_modified":false,"unit_currency":"KRW","avg_krw_buy_price":"483","modified":false},{"currency":"EOS","balance":"2722.27966035","locked":"0.0","avg_buy_price":"8577.66","avg_buy_price_modified":true,"unit_currency":"KRW","avg_krw_buy_price":"8577.66","modified":true}];
        get_Balance().then((balance) => {
            index = 0;
            let sum = [0, '-', 0, 0, 0];
            for(i = 0; i < balance.length; i++)
            {
                let data = [ 0, 0, 0, 0, 0, 0, 0, 0];
                data[0] = balance[i]['currency'];
                data[1] = balance[i]['balance']*1; // 잔고
                data[1] = data[1].toFixed(2)*1;
                if(data[0] == "KRW") 
                {
                    data[2] = 1; // 평단가
                    data[3] = data[1] * data[2]; // 투자금액
                    data[5] = data[1]; // 평가금액
                }
                else
                { 
                    data[2] = balance[i]['avg_buy_price']; // 평단가
                    data[3] = data[1] * data[2]; // 투자금액
                    data[3] = data[3].toFixed(2)*1;
                    data[4] = 7000; // 현재 price를 알아야 함.
                    data[5] = data[1] * data[4]; // 평가금액
                    data[6] = (data[5] - data[3])*1; // 손익
                    data[6] = data[6].toFixed(2)*1;
                    data[7] = (data[6] / data[3]); // 손익비율
                    data[7] = data[7].toFixed(4) * 100;

                    sum[3] += data[6];
                    sum[0] += data[3];
                    sum[2] += data[5];
                }

                index++;
                let idstr_prefix = "#Cell_bal" + index.toString();
                for(j = 1; j <= xlabel.length; j++)
                {
                    let idstr = idstr_prefix + "_" + j.toString();
                    console.log(idstr);
                    $(idstr).html(data[j-1]);
                }
            }

            $("#BAL1").html(sum[0].toFixed(2)*1);
            $("#BAL2").html(sum[1]);
            $("#BAL3").html(sum[2].toFixed(2)*1);
            $("#BAL4").html(sum[3].toFixed(2)*1);
            sum[4] = sum[3]*100/sum[0];
            $("#BAL5").html(sum[4].toFixed(2)*1);
        }).catch((error) => {

        });        
    }


    async function Create_EvaluationTable(table_bodyID)
    {
        let xlabel = ["1", "2", "3", "4", "5", "6", "7", "8" , "9" ];
        let ylabel = ["evx1", "evx2", "evx3", "evx4", "evx5", "evx6" ];
        let index = 0;
        let selecterID = "#" + table_bodyID + " > tr";

        $(selecterID).each(function () {
            createTds(index++, $(this), table_bodyID, xlabel, ylabel);
        });

        let sum = [ 0, 0, 0, 0, 0, 0, 0];

        index = 0;
        for(market in ni_summary)
        {
            for(marketID in ni_summary[market])
            {
                index++;
                let idstr_prefix = "#Cell_evx" + index.toString();
                let data = [];
                data[0] = index;
                data[1] = market;
                data[2] = marketID;
                data[3] = ni_summary[market][marketID]['normal']['net_KRW'];
                data[4] = ni_summary[market][marketID]['reverse']['net_Coin']; 
                data[5] = tr_summary[market][marketID]['normal']['Coin_KRW_eval'];
                data[6] = tr_summary[market][marketID]['reverse']['Coin_KRW_eval'];
                data[7] = ni_summary[market][marketID]['normal']['net_KRW'] + tr_summary[market][marketID]['normal']['Coin_KRW_eval'];
                data[8] = ni_summary[market][marketID]['reverse']['net_Coin'] + tr_summary[market][marketID]['reverse']['Coin_KRW_eval'];
                //console.log("data = ", data);
                for(let i = 1; i <= data.length; i++)
                {
                    let idstr = idstr_prefix + "_" + i.toString();
                    $(idstr).html(data[i-1]);
                }
                sum[0] += data[3];
                sum[1] += data[4];
                sum[2] += data[5];
                sum[3] += data[6];
                sum[4] += data[7];
                sum[5] += data[8];
                sum[6] += data[7] + data[8]*tr_summary[market][marketID]['cur_price'];
            }
        }

        $("#FEV1").html(sum[0]);
        $("#FEV2").html(sum[1]);
        $("#FEV3").html(sum[2]);
        $("#FEV4").html(sum[3]);
        $("#FEV5").html(sum[4]);
        $("#FEV6").html(sum[5]);
        $("#FFEV").html(sum[6]);
    }

    
    async function Create_PortfolioTable(table_bodyID)
    {
        //var pf = { "KRW-EOS_ID1": [ "R", 2, 6500, 10000, 10, 8000, false ], "KRW-EOS_ID2": [ "R", 4, 6500, 10000, 10, 8000, false ], "KRW-EOS_ID3": [ "N", 2, 6500, 10000, 10, 8000, false ], "KRW-EOS_ID4": [ "N", 4, 6500, 10000, 10, 8000, false ] }
        pf = await get_PortfolioLists("portfolio_list.json");
        console.log("PF = ", JSON.stringify(pf));
        let index = 0;
        for (key in pf)
        {
            index++;
            //var obj = "#" + table_ID + " > tbody";
            var obj = "#" + table_bodyID;
            let market = key.split('_')[0];
            let marketID = key.split('_')[1];
            let trademode = pf[key][0];
            let configindex = pf[key][1];
            let p_min = pf[key][2];
            let p_max = pf[key][3];
            let p_step = pf[key][4];
            let p_start = pf[key][5];
            let p_direction = pf[key][6];

            if(config_filename.hasOwnProperty(market) == false) { config_filename[market] = {}; }
            if(config_filename[market].hasOwnProperty(marketID) == false) { config_filename[market][marketID] = {}; }
            config_filename[market][marketID] = "Config[" + market + "][" + marketID + "].json";

            console.log("key = ", key, "market = ", market, "marketID = ", marketID, "configindex = ", configindex, "p_min = ", p_min, "p_max = ", p_max,
                        "p_start = ", p_start, "p_step = ", p_step, "p_direction = ", p_direction);

            let id_name = "trade_instance" + index.toString()
            let newtr = $(obj).append($("<tr>").css("text-align","center").text('').attr("id", id_name));
            newtr.append($("<td>").css("text-align","center").text(index));    
            newtr.append($("<td>").css("text-align","center").text(market));    
            newtr.append($("<td>").css("text-align","center").text(marketID));    
            newtr.append($("<td>").css("text-align","center").text(trademode));    
            newtr.append($("<td>").css("text-align","center").text(configindex));    
            newtr.append($("<td>").css("text-align","center").text(p_min));    
            newtr.append($("<td>").css("text-align","center").text(p_max));    
            newtr.append($("<td>").css("text-align","center").text(p_start));    
            newtr.append($("<td>").css("text-align","center").text(p_step));    
            newtr.append($("<td>").css("text-align","center").text(p_direction));  
            
            if(index == 1)
            {
                let btnid = "pfbtn" + index.toString();
                newtr.append($('<td>').attr('id', btnid));
                makeButton("#pfbtn" + index.toString(), "pfapplyBtn" + index.toString(), "Trading 반영", Pfapply_ButtonClickhandler, "css_style1", "wdith: 120px");
            }
        }
    }


    let portfolio_list = ["KRW-EOS", "KRW-XRP", "KRW-BTC", "KRW-ETH", "KRW-BCH"];
    var trade_mode = ["normal", "reverse"];
    var control_mode = ["stop", "run"];
    var algorithm = [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 ];
    var config_param = {};
    var start_date = 0;
    var end_date = 0;

    async function Create_ConfigTable(table_bodyID)
    {
        let xlabel = ["market", "ID", "mode", "algorithm", "base_price", "status", "period", "newslot_ratio", "bidask_ratio", "target_ratio", "max_slot_cnt", "max_bidask_cnt", "limit_KRW", "limit_Coin"
                        , "amount0", "amount1", "amount2", "amount3", "amount4", "amount5", "amount6", "amount7", "amount8", "amount9", "applay_cfg"];
        let ylabel = ["instance1", "instance2", "instance3", "instance4", "instance5", "instance6"];
        let index = 0;
        let selecterID = "#" + table_bodyID + " > tr";
        //alert(selecterID);
        $(selecterID).each(function () {
            //$("#ConfigurationTable_body > tr").each(function () {
            createTds(index++, $(this), table_bodyID, xlabel, ylabel);
        });

        //var pf = { "KRW-EOS_ID1": [ "R", 2, 6500, 10000, 10, 8000, false ], "KRW-EOS_ID2": [ "R", 4, 6500, 10000, 10, 8000, false ], "KRW-EOS_ID3": [ "N", 2, 6500, 10000, 10, 8000, false ], "KRW-EOS_ID4": [ "N", 4, 6500, 10000, 10, 8000, false ] }
        //var pf = {};
        pf = await get_PortfolioLists("portfolio_list.json");

        index = 0;
        for (key in pf)
        {
            index++;
            let market = key.split('_')[0];
            let marketID = key.split('_')[1];
            let config = {}

            if(config_filename.hasOwnProperty(market) == false) { config_filename[market] = {}; }
            if(config_filename[market].hasOwnProperty(marketID) == false) { config_filename[market][marketID] = {}; }
            config_filename[market][marketID] = "Config[" + market + "][" + marketID + "].json";

            config = await get_ConfigParam(config_filename[market][marketID]); 

            if(config['errno'] == undefined)
            {
                if(config_param.hasOwnProperty(market) == false) { config_param[market] = {}; }
                if(config_param[market].hasOwnProperty(marketID) == false) { config_param[market][marketID] = {}; }
                config_param[market][marketID] = config;

                let market_list_index = portfolio_list.indexOf(market);
                makeListBox("#Cell_instance" + index.toString() + "_market", "market" + index.toString(), portfolio_list, ListBox_handleChange, "css_style1", "width: 90px", market_list_index, "single", 1);
                makeInputBox("#Cell_instance" + index.toString() + "_ID", "ID" + index.toString(), "text", marketID, "css_style1", "width: 70px", 5000, 1000000, 10, InputBoxHandler);

                let trade_mode_index = trade_mode.indexOf(config['trade_mode']);
                makeListBox("#Cell_instance" + index.toString() + "_mode", "mode" + index.toString(), trade_mode, ListBox_handleChange, "css_style1", "width: 70px", trade_mode_index, "single", 1);

                let algorithm_index = algorithm.indexOf(config['restart_flag']);
                makeListBox("#Cell_instance" + index.toString() + "_algorithm", "algorithm" + index.toString(), algorithm, ListBox_handleChange, "css_style1", "width: 80px", algorithm_index, "single", 1);
                makeInputBox("#Cell_instance" + index.toString() + "_base_price", "base_price" + index.toString(), "number", config['restart_base_price'], "css_style1", "width: 70px", 1000, 50000000, 10, InputBoxHandler);

                let control_mode_index = control_mode.indexOf(config['control_mode']);
                makeListBox("#Cell_instance" + index.toString() + "_status", "status" + index.toString(), control_mode, ListBox_handleChange, "css_style1", "width: 70px", control_mode_index, "single", 1);


                makeInputBox("#Cell_instance" + index.toString() + "_period", "period" + index.toString(), "number", config['check_period'], "css_style1", "width: 70px", 1, 120, 1, InputBoxHandler);
                makeInputBox("#Cell_instance" + index.toString() + "_newslot_ratio", "newslot_ratio" + index.toString(), "number", config['new_slot_Create_Ratio'], "css_style1", "width: 100px", -15, 15, 0.01, InputBoxHandler);
                
                makeInputBox("#Cell_instance" + index.toString() + "_bidask_ratio", "bidask_ratio" + index.toString(), "number", config['new_addBidAsk_Create_Ratio'], "css_style1", "width: 100px", -30, 30, 0.01, InputBoxHandler);
                makeInputBox("#Cell_instance" + index.toString() + "_target_ratio", "target_ratio" + index.toString(), "number", config['target_BidAsk_Ratio'], "css_style1", "width: 100px", -20, 20, 0.01, InputBoxHandler);

                makeInputBox("#Cell_instance" + index.toString() + "_max_slot_cnt", "max_slot_cnt" + index.toString(), "number", config['max_slot_cnt'], "css_style1", "width: 70px", 1, 1000, 1, InputBoxHandler);
                makeInputBox("#Cell_instance" + index.toString() + "_max_bidask_cnt", "max_bidask_cnt" + index.toString(), "number", config['max_addBidAsk_cnt'], "css_style1", "width: 100px", 1, 20, 1, InputBoxHandler);
                makeInputBox("#Cell_instance" + index.toString() + "_limit_KRW", "limit_KRW" + index.toString(), "number", config['limit_invest_KRW'], "css_style1", "width: 80px", 1000, 100000000, 10000, InputBoxHandler);
                makeInputBox("#Cell_instance" + index.toString() + "_limit_Coin", "limit_Coin" + index.toString(), "number", config['limit_invest_coin'], "css_style1", "width: 80px", 500, 50000, 100, InputBoxHandler);
                
                makeInputBox("#Cell_instance" + index.toString() + "_amount0", "amount0_" + index.toString(), "number", config['slot_BidAsk_KrwCoin'][0], "css_style1", "width: 50px", 1, 1000, 1, InputBoxHandler);
                makeInputBox("#Cell_instance" + index.toString() + "_amount1", "amount1_" + index.toString(), "number", config['slot_BidAsk_KrwCoin'][1], "css_style1", "width: 50px", 1, 1000, 1, InputBoxHandler);
                makeInputBox("#Cell_instance" + index.toString() + "_amount2", "amount2_" + index.toString(), "number", config['slot_BidAsk_KrwCoin'][2], "css_style1", "width: 50px", 1, 1000, 1, InputBoxHandler);
                makeInputBox("#Cell_instance" + index.toString() + "_amount3", "amount3_" + index.toString(), "number", config['slot_BidAsk_KrwCoin'][3], "css_style1", "width: 50px", 1, 1000, 1, InputBoxHandler);
                makeInputBox("#Cell_instance" + index.toString() + "_amount4", "amount4_" + index.toString(), "number", config['slot_BidAsk_KrwCoin'][4], "css_style1", "width: 50px", 1, 1000, 1, InputBoxHandler);
                makeInputBox("#Cell_instance" + index.toString() + "_amount5", "amount5_" + index.toString(), "number", config['slot_BidAsk_KrwCoin'][5], "css_style1", "width: 50px", 1, 1000, 1, InputBoxHandler);
                makeInputBox("#Cell_instance" + index.toString() + "_amount6", "amount6_" + index.toString(), "number", config['slot_BidAsk_KrwCoin'][6], "css_style1", "width: 50px", 1, 1000, 1, InputBoxHandler);
                makeInputBox("#Cell_instance" + index.toString() + "_amount7", "amount7_" + index.toString(), "number", config['slot_BidAsk_KrwCoin'][7], "css_style1", "width: 50px", 1, 1000, 1, InputBoxHandler);
                makeInputBox("#Cell_instance" + index.toString() + "_amount8", "amount8_" + index.toString(), "number", config['slot_BidAsk_KrwCoin'][8], "css_style1", "width: 50px", 1, 1000, 1, InputBoxHandler);
                makeInputBox("#Cell_instance" + index.toString() + "_amount9", "amount9_" + index.toString(), "number", config['slot_BidAsk_KrwCoin'][9], "css_style1", "width: 50px", 1, 1000, 1, InputBoxHandler);
                
                makeButton("#Cell_instance" + index.toString() + "_applay_cfg", "apply_cfg_Btn" + index.toString(), "Apply CFG", CFG_ButtonClickhandler, "css_style1", "width: 115px");
            }
            else
            {
                console.log("can't read file.....................")
            }
        }

        Create_TradingSummaryTable("TradingSummary_body");
        Create_TradingDetailTable("TradingDetail_body", null, null);
        Create_IncomeSummaryTable("IncomeSummary_body");
        Create_IncomeDetailTable("IncomeDetail_body", null, null);
        $("#period_start").change(() => { start_date = $("#startdate").val(); console.log("start = ", start_date); }); 
        $("#period_end").change(() => { end_date = $("#enddate").val(); console.log("end = ", end_date) }); 
    }

    function Create_TradingSummaryTable(table_bodyID)
    {
        let market = "KRW-EOS";
        let marketID = "ID1";
        let index = 0;
        let selecterID = "#" + table_bodyID;
        let table = $(selecterID);
        index = 0;

        let  sum = {
            'liquidCnt' : 0,
            'SeedSlotCnt' : 0, 
            'normal' : { 'Coin_BidAsk_amount' : 0, 'Coin_BidAsk_Average' : 0, 'BidAsk_KRW' : 0, 'Coin_KRW_eval' : 0, },
            'reverse' : { 'Coin_BidAsk_amount' : 0, 'Coin_BidAsk_Average' : 0, 'BidAsk_KRW' : 0, 'Coin_KRW_eval' : 0, },
        }

        get_TradingSummary(market, marketID, "all").then((jsondata) => {
            tr_summary = JSON.parse(JSON.stringify(jsondata));

            for (market in jsondata)
            {
                for (marketID in jsondata[market])
                {
                    index++;
                    console.log("maket = ", market, "marketID = ", marketID, "mode = ", jsondata[market][marketID]['mode']);
                    var mode = jsondata[market][marketID]["mode"];
                    var CrDate = jsondata[market][marketID]["CrDate"];
                    var SlotNo = jsondata[market][marketID]["liquidCnt"];
                    var SeedSlotCnt = jsondata[market][marketID]["SeedSlotCnt"];
                    var cur_price = jsondata[market][marketID]["cur_price"];
                    var Last_Tr_Price = jsondata[market][marketID]["Last_Tr_Price"];
                    var Net_Ratio = jsondata[market][marketID]["Net_Ratio"];
                    var Gap_Ratio = jsondata[market][marketID]["Gap_Ratio"];

                    var N_Coin_BidAsk_amount = jsondata[market][marketID]['normal']["Coin_BidAsk_amount"];
                    var N_Coin_BidAsk_Average = jsondata[market][marketID]['normal']["Coin_BidAsk_Average"];
                    var N_BidAsk_KRW = jsondata[market][marketID]['normal']["BidAsk_KRW"];
                    var N_Coin_KRW_eval = jsondata[market][marketID]['normal']["Coin_KRW_eval"];

                    var R_Coin_BidAsk_amount = jsondata[market][marketID]['reverse']["Coin_BidAsk_amount"];
                    var R_Coin_BidAsk_Average = jsondata[market][marketID]['reverse']["Coin_BidAsk_Average"];
                    var R_BidAsk_KRW = jsondata[market][marketID]['reverse']["BidAsk_KRW"];
                    var R_Coin_KRW_eval = jsondata[market][marketID]['reverse']["Coin_KRW_eval"];

                    var tr = $('<tr>');
                    table.append(tr);
                    $(tr).append($('<td>').html(index));
                    $(tr).append($('<td>').html(market));
                    $(tr).append($('<td>').html(marketID));
                    $(tr).append($('<td>').html(mode));
                    $(tr).append($('<td>').html(CrDate));
                    $(tr).append($('<td>').html(SlotNo));
                    $(tr).append($('<td>').html(SeedSlotCnt));
                    $(tr).append($('<td>').html(N_Coin_BidAsk_amount));
                    $(tr).append($('<td>').html(N_Coin_BidAsk_Average));
                    $(tr).append($('<td>').html(N_BidAsk_KRW));
                    $(tr).append($('<td>').html(N_Coin_KRW_eval));
                    $(tr).append($('<td>').html(R_Coin_BidAsk_amount));
                    $(tr).append($('<td>').html(R_Coin_BidAsk_Average));
                    $(tr).append($('<td>').html(R_BidAsk_KRW));
                    $(tr).append($('<td>').html(R_Coin_KRW_eval));
                    $(tr).append($('<td>').html(Net_Ratio));
                    $(tr).append($('<td>').html(Last_Tr_Price));
                    $(tr).append($('<td>').html(cur_price));
                    $(tr).append($('<td>').html(Gap_Ratio));
                    let btnid = "trbtn" + index.toString();
                    $(tr).append($('<td>').attr('id', btnid));
                    makeButton("#trbtn" + index.toString(), "TradingDetailBtn" + index.toString(), "Veiw Detail", TrDetailView_ButtonClickhandler, "css_style1", "width: 140px");

                   sum['liquidCnt'] += jsondata[market][marketID]["liquidCnt"];
                   sum['SeedSlotCnt'] += jsondata[market][marketID]["SeedSlotCnt"];
                    
                   sum['normal']['Coin_BidAsk_amount'] += jsondata[market][marketID]['normal']["Coin_BidAsk_amount"];
                   sum['normal']['Coin_BidAsk_Average'] += jsondata[market][marketID]['normal']["Coin_BidAsk_Average"];
                   sum['normal']['BidAsk_KRW'] += jsondata[market][marketID]['normal']["BidAsk_KRW"];
                   sum['normal']['Coin_KRW_eval'] += jsondata[market][marketID]['normal']["Coin_KRW_eval"];

                   sum['reverse']['Coin_BidAsk_amount'] += jsondata[market][marketID]['reverse']["Coin_BidAsk_amount"];
                   sum['reverse']['Coin_BidAsk_Average'] += jsondata[market][marketID]['reverse']["Coin_BidAsk_Average"];
                   sum['reverse']['BidAsk_KRW'] += jsondata[market][marketID]['reverse']["BidAsk_KRW"];
                   sum['reverse']['Coin_KRW_eval'] += jsondata[market][marketID]['reverse']["Coin_KRW_eval"];
                }
            }

            $("#TS1").html(sum['liquidCnt']);
            $("#TS2").html(sum['SeedSlotCnt']);
            $("#TS3").html(sum['normal']['Coin_BidAsk_amount']);
            $("#TS4").html(sum['normal']['Coin_BidAsk_Average']);
            $("#TS5").html(sum['normal']['BidAsk_KRW']);
            $("#TS6").html(sum['normal']['Coin_KRW_eval']);
            $("#TS7").html(sum['reverse']['Coin_BidAsk_amount']);
            $("#TS8").html(sum['reverse']['Coin_BidAsk_Average']);
            $("#TS9").html(sum['reverse']['BidAsk_KRW']);
            $("#TS10").html(sum['reverse']['Coin_KRW_eval']);
        }).catch((error) => {

        });        
    }

    
    function Create_TradingDetailTable(table_bodyID, market, marketID)
    {
        let index = 0;
        let selecterID = "#" + table_bodyID;
        let table = $(selecterID);
        index = 0;

        if(market == null || marketID == null) { return; }

        get_TradingDetailInfo(market, marketID, "all").then((jsondata) => {
            console.log("get_TradingDetailInfo - jsondata.length = ", jsondata['list'].length);
            for (i = 0; i < jsondata['list'].length; i++) 
            {
                index++;
                var mode = jsondata['list'][i]["mode"];
                var CrDate = jsondata['list'][i]["CrDate"];
                var SlotNo = jsondata['list'][i]["SlotNo"];
                var BidAsk_Cnt = jsondata['list'][i]["BidAsk_Cnt"];
                var cur_price = jsondata["cur_price"];
                var Last_Tr_Price = jsondata['list'][i]["Last_Tr_Price"];
                var Net_Ratio = jsondata['list'][i]["Net_Ratio"];
                var Gap_Ratio = jsondata['list'][i]["Gap_Ratio"];

                var N_Coin_BidAsk_amount = jsondata['list'][i]['normal']["Coin_BidAsk_amount"];
                var N_Coin_BidAsk_Average = jsondata['list'][i]['normal']["Coin_BidAsk_Average"];
                var N_BidAsk_KRW = jsondata['list'][i]['normal']["BidAsk_KRW"];
                var N_Coin_KRW_eval = jsondata['list'][i]['normal']["Coin_KRW_eval"];

                var R_Coin_BidAsk_amount = jsondata['list'][i]['reverse']["Coin_BidAsk_amount"];
                var R_Coin_BidAsk_Average = jsondata['list'][i]['reverse']["Coin_BidAsk_Average"];
                var R_BidAsk_KRW = jsondata['list'][i]['reverse']["BidAsk_KRW"];
                var R_Coin_KRW_eval = jsondata['list'][i]['reverse']["Coin_KRW_eval"];

                var tr = $('<tr>');
                table.append(tr);
                $(tr).append($('<td>').html(index));
                $(tr).append($('<td>').html(market));
                $(tr).append($('<td>').html(marketID));
                $(tr).append($('<td>').html(mode));
                $(tr).append($('<td>').html(CrDate));
                $(tr).append($('<td>').html(SlotNo));
                $(tr).append($('<td>').html(BidAsk_Cnt));
                $(tr).append($('<td>').html(N_Coin_BidAsk_amount));
                $(tr).append($('<td>').html(N_Coin_BidAsk_Average));
                $(tr).append($('<td>').html(N_BidAsk_KRW));
                $(tr).append($('<td>').html(N_Coin_KRW_eval));
                $(tr).append($('<td>').html(R_Coin_BidAsk_amount));
                $(tr).append($('<td>').html(R_Coin_BidAsk_Average));
                $(tr).append($('<td>').html(R_BidAsk_KRW));
                $(tr).append($('<td>').html(R_Coin_KRW_eval));
                $(tr).append($('<td>').html(Net_Ratio));
                $(tr).append($('<td>').html(Last_Tr_Price));
                $(tr).append($('<td>').html(cur_price));
                $(tr).append($('<td>').html(Gap_Ratio));
            }
        }).catch((error) => {

        });
    }



    function Create_IncomeSummaryTable(table_bodyID)
    {
        let index = 0;
        let selecterID = "#" + table_bodyID;
        let table = $(selecterID);
        let market = "KRW-EOS";
        let marketID = "ID1";

        let sum = {
            'normal' : { 'total_invest_KRW' : 0, 'eval_KRW' : 0, 'net_KRW' : 0, },
            'reverse' : { 'total_Ask_Coin' : 0, 'reBid_Coin' : 0, 'net_Coin' : 0, },
            'Net_Ratio' : 0, 
        };

        get_NetIncomeSummary(market, marketID, "all").then((jsondata) => {
            ni_summary = JSON.parse(JSON.stringify(jsondata));
            for (market in jsondata)
            {
                for (marketID in jsondata[market])
                {
                    index++;
                    var mode = jsondata[market][marketID]["mode"];
                    var CrDate = jsondata[market][marketID]["CrDate"];

                    var total_invest_KRW = jsondata[market][marketID]['normal']["total_invest_KRW"];
                    var eval_KRW = jsondata[market][marketID]['normal']["eval_KRW"];
                    var net_KRW = jsondata[market][marketID]['normal']["net_KRW"];

                    var total_Ask_Coin = jsondata[market][marketID]['reverse']["total_Ask_Coin"];
                    var reBid_Coin = jsondata[market][marketID]['reverse']["reBid_Coin"];
                    var net_Coin = jsondata[market][marketID]['reverse']["net_Coin"];

                    var Net_Ratio = jsondata[market][marketID]["Net_Ratio"];

                    var tr = $('<tr>');
                    table.append(tr);
                    $(tr).append($('<td>').html(index));
                    $(tr).append($('<td>').html(market));
                    $(tr).append($('<td>').html(marketID));
                    $(tr).append($('<td>').html(mode));
                    $(tr).append($('<td>').html(CrDate));

                    $(tr).append($('<td>').html(total_invest_KRW));
                    $(tr).append($('<td>').html(eval_KRW));
                    $(tr).append($('<td>').html(net_KRW));

                    $(tr).append($('<td>').html(total_Ask_Coin));
                    $(tr).append($('<td>').html(reBid_Coin));
                    $(tr).append($('<td>').html(net_Coin));

                    $(tr).append($('<td>').html(Net_Ratio));

                    let btnid = "incomebtn" + index.toString();
                    $(tr).append($('<td>').attr('id', btnid));
                    makeButton("#incomebtn" + index.toString(), "NetIncomeDetailBtn" + index.toString(), "Veiw Detail", NetIncomDetailView_ButtonClickhandler, "css_style1", "width: 142px");

                    sum['normal']['total_invest_KRW'] += total_invest_KRW;
                    sum['normal']['eval_KRW'] += eval_KRW; 
                    sum['normal']['net_KRW'] += net_KRW; 
                    sum['reverse']['total_Ask_Coin'] += total_Ask_Coin;
                    sum['reverse']['reBid_Coin'] += reBid_Coin; 
                    sum['reverse']['net_Coin'] += net_Coin;
                }
            }
            $("#NI1").html(sum['normal']['total_invest_KRW'].toFixed(0) * 1);
            $("#NI2").html(sum['normal']['eval_KRW'].toFixed(0) * 1);
            $("#NI3").html(sum['normal']['net_KRW'].toFixed(0) * 1);
            $("#NI4").html(sum['reverse']['total_Ask_Coin']);
            $("#NI5").html(sum['reverse']['reBid_Coin']);
            $("#NI6").html(sum['reverse']['net_Coin']);

            Create_EvaluationTable("Evaluation_body");
        }).catch((error) => {

        });
    }



    function Create_IncomeDetailTable(table_bodyID, market, marketID)
    {
        let index = 0;
        let selecterID = "#" + table_bodyID;
        let table = $(selecterID);
        index = 0;

        let  sum = {
                'SlotNo' : 0,
                'BidAsk_Cnt' : 0, 
                'normal' : { 'Coin_Bid_amount' : 0, 'Coin_Bid_Average' : 0, 'Bid_KRW' : 0, 'Ask_KRW' : 0, 'Net_KRW' : 0, },
                'reverse' : { 'Coin_Ask_amount' : 0, 'Coin_Ask_Average' : 0, 'Reclaim_KRW' : 0, 'ReBid_amount' : 0, 'Net_Coin' : 0},
                }

        if(market == null || marketID == null) { return; }

        let startDate = new Date(start_date);
        let endDate = new Date(end_date);

        get_NetIncomeDetailInfo(market, marketID, "all").then((jsondata) => {
            console.log("jsondata['list'].length = ", jsondata['list'].length);
            for (i = 0; i < jsondata['list'].length; i++) 
            {
                if(start_date != 0 && end_date != 0)
                {
                    let trDate = jsondata["list"][i]["CrDate"];
                    trDate = trDate.split('T')[0];
                    trDate = new Date(trDate);
                    if(trDate < startDate || trDate > endDate) { continue;  }     
                }

                var no = i + 1;
                var mode = jsondata["list"][i]["mode"];
                var CrDate = jsondata["list"][i]["CrDate"];
                var SlotNo = jsondata["list"][i]["SlotNo"];
                var BidAsk_Cnt = jsondata["list"][i]["BidAsk_Cnt"];
                var cur_price = jsondata["list"][i]["cur_price"];
                var Last_Tr_Price = jsondata["list"][i]["Last_Tr_Price"];
                var Net_Ratio = jsondata["list"][i]["Net_Ratio"];

                var Coin_Bid_amount = jsondata["list"][i]['normal']["Coin_Bid_amount"];
                var Coin_Bid_Average = jsondata["list"][i]['normal']["Coin_Bid_Average"];
                var Bid_KRW = jsondata["list"][i]['normal']["Bid_KRW"];
                var Ask_KRW = jsondata["list"][i]['normal']["Ask_KRW"];
                var Net_KRW = jsondata["list"][i]['normal']["Net_KRW"];

                var Coin_Ask_amount = jsondata["list"][i]['reverse']["Coin_Ask_amount"];
                var Coin_Ask_Average = jsondata["list"][i]['reverse']["Coin_Ask_Average"];
                var Reclaim_KRW = jsondata["list"][i]['reverse']["Reclaim_KRW"];
                var ReBid_amount = jsondata["list"][i]['reverse']["ReBid_amount"];
                var Net_Coin = jsondata["list"][i]['reverse']["Net_Coin"];

                var tr = $('<tr>');
                table.append(tr);
                $(tr).append($('<td>').html(no));
                $(tr).append($('<td>').html(market));
                $(tr).append($('<td>').html(marketID));
                $(tr).append($('<td>').html(mode));
                $(tr).append($('<td>').html(CrDate));
                $(tr).append($('<td>').html(SlotNo));
                $(tr).append($('<td>').html(BidAsk_Cnt));
                $(tr).append($('<td>').html(Coin_Bid_amount));
                $(tr).append($('<td>').html(Coin_Bid_Average));
                $(tr).append($('<td>').html(Bid_KRW));
                $(tr).append($('<td>').html(Ask_KRW));
                $(tr).append($('<td>').html(Net_KRW));
                $(tr).append($('<td>').html(Coin_Ask_amount));
                $(tr).append($('<td>').html(Coin_Ask_Average));
                $(tr).append($('<td>').html(Reclaim_KRW));
                $(tr).append($('<td>').html(ReBid_amount));
                $(tr).append($('<td>').html(Net_Coin));
                $(tr).append($('<td>').html(Net_Ratio));

                sum['SlotNo'] += SlotNo;
                sum['BidAsk_Cnt'] += BidAsk_Cnt;
                sum['normal']['Coin_Bid_amount'] += Coin_Bid_amount;
                sum['normal']['Bid_KRW'] += Bid_KRW;
                sum['normal']['Ask_KRW'] += Ask_KRW;
                sum['normal']['Net_KRW'] += Net_KRW;
                sum['reverse']['Coin_Ask_amount'] += Coin_Ask_amount;
                sum['reverse']['Coin_Ask_Average'] += Coin_Ask_Average;
                sum['reverse']['Reclaim_KRW'] += Reclaim_KRW;
                sum['reverse']['ReBid_amount'] += ReBid_amount;
                sum['reverse']['Net_Coin'] += Net_Coin;
            }
            $("#NID1").html(sum['BidAsk_Cnt']);
            $("#NID2").html(sum['normal']['Coin_Bid_amount'].toFixed(2)*1);
            sum['normal']['Coin_Bid_Average'] = (sum['normal']['Bid_KRW']) / (sum['normal']['Coin_Bid_amount']);
            $("#NID3").html(sum['normal']['Coin_Bid_Average'].toFixed(0)*1);
            $("#NID4").html(sum['normal']['Bid_KRW'].toFixed(0)*1);
            $("#NID5").html(sum['normal']['Ask_KRW'].toFixed(0)*1);
            $("#NID6").html(sum['normal']['Net_KRW'].toFixed(0)*1);
            $("#NID7").html(sum['reverse']['Coin_Ask_amount'].toFixed(2)*1);
            $("#NID8").html(sum['reverse']['Coin_Ask_Average'].toFixed(0)*1);
            $("#NID9").html(sum['reverse']['Reclaim_KRW'].toFixed(0)*1);
            $("#NID10").html(sum['reverse']['ReBid_amount'].toFixed(2)*1);
            $("#NID11").html(sum['reverse']['Net_Coin'].toFixed(2)*1);
        }).catch((error) => {

        })
    }


    function createTds(index, obj, tableBodyID, xlabel, ylabel) 
    {
        var cellname = "";
        for(var i = 0; i < xlabel.length; i++)
        {
            cellname = "Cell_" + ylabel[index] +"_"+ xlabel[i];
            //obj.append($("<td>").css("text-align","center").html('<a href = "https://www.naver.com" target = "_blank">0</a>').attr("statusname", cellname));
            //obj.append($("<td>").css("text-align","center").text('-').attr("cellname", cellname));
            obj.append($("<td>").css("text-align","center").text("").attr("id", cellname));
        }
    }

    function attachWidgetToTable(tdID, WidgetCategory) 
    {
        let accessID = "#" + tdID;

        switch(WidgetCategory)
        {
            case "ListBox" : 
                let ht = '<div><select id = selectbox1 name="single_selection"><option value="volvo">A</option><option value="saab">B</option><option value="opel" selected="selected">C</option><option value="audi">D</option></select></div>'
                $(accessID).text('').append(ht);
                break;
            
        }
    }


    function makeListBox(ParentID, ID, datalist, callback, classID, style, defaultIndex, option, size)
    {
        /*
        let result = $('<div><select>');
        //result = result.find('select').attr("id", "selecterID").attr("size", 5).attr("multiple", "multiple").attr("style", "width: 200px").append("<option value = a>aa").attr("selected", "selected").append("<option value = b>BB");
        result.find('select').attr("id", "selecterID").append("<option value = a>aa").attr("selected", "selected").append("<option value = b>BB");
        $('#Cell_max_slot_cnt_P3').append(result);
        */
        var Obj = null;
        Obj = $('<div><select>')
        if(option == "multiple") { Obj.find('select').attr("size", size).attr("id", ID).attr("class", classID).attr("style", style).attr("multiple", "multiple"); }
        else { Obj.find('select').attr("size", size).attr("id", ID).attr("class", classID).attr("style", style); }
 
        let finalhtml = "";
        for(i = 0; i < datalist.length; i++)
        {
            if(i == defaultIndex) { html = "<option value=" + datalist[i] + " selected=selected>" + datalist[i]; } else { html = "<option value="+datalist[i] + ">" + datalist[i]; }
            finalhtml += html;
        }
        Obj.find('select').append(finalhtml);
        // on binding
        Obj.find('select').bind("change", function() { return callback(this, datalist); });
        $(ParentID).append(Obj);
    }

    /*
    List Box onchange Callback.... Event 종류 참조 : https://heavening.tistory.com/23
    */

    function ListBox_handleChange (self, itemList) 
    {
        //console.log("ListBox_handleChange = ", self);
        for(i = 0; i < itemList.length; i++)
        {
            if(self[i].selected) { console.log("Selected Item[", i, "] = ", self[i].value); }
        }
    }

    /*
    get selected item value from listbox....
    */
    function getListBox_values(id) 
    {
        id = "#" + id;
        console.log(id);
        let Obj = $(id).find('option');
        console.log(Obj);
        let selval = [];
        let j = 0;
        for(i = 0; i < Obj.length; i++)
        {
            if(Obj[i].selected) 
            { 
                //console.log("[getListBox_values] Selected Item[", i, "] = ", Obj[i].value); 
                selval.push(Obj[i].value); 
            }
        }
        console.log("Selected Items in ListBox is ", selval);
        if(selval.length == 1) { return selval[0]; }
        return selval;
    }



    /*
    Button 생성
    <div">
        <button id = button1, type="button" onclick=buttton1_handler()>Button1</button>
    </div>
    */
    function makeButton(ParentID, ID, Name, callback, classID, style)
    {
        var Obj = $('<div><button>');
        Obj.find('button').attr("id", ID).attr("class", classID).attr("style", style).attr("typpe", "button").text(Name);
        Obj.find('button').bind("click", function() { return callback(this, ID); }); 
        $(ParentID).append(Obj);
    }



    /*
    Button Click Handler.......
    */
    async function CFG_ButtonClickhandler(self, ID)
    {
        console.log(" ButtonClickhandler = ", self);
        console.log("Button ID = ", ID);
        let instance = ID.replace("apply_cfg_Btn", "");
        instance = instance*1;
        let marketlist = Object.keys(pf);
        console.log("marketlist = ", marketlist, " instance = ", instance);
        let instance_name = marketlist[instance-1];
        console.log("instance_name =", instance_name);
        let market = instance_name.split('_')[0];
        let marketID = instance_name.split('_')[1];
        //let cur_config = JSON.parse(JSON.stringify(config_param[market][marketID]));
        let cur_config = await get_ConfigParam(config_filename[market][marketID]); 

        let user_config = JSON.parse(JSON.stringify(config_param[market][marketID]));
        let NeedtoUpdate = false;
        console.log("cur_config = ", cur_config);

        //{"trade_mode":"reverse","control_mode":"run","simulation":true,"real_test_mode":false,"check_period":15,"slot_BidAsk_KrwCoin":[30,30,30,30,30,30,30,30,30,30],
        //"max_slot_cnt":30,"max_addBidAsk_cnt":4,"target_BidAsk_Ratio":1.5,"target_BidAsk_Ratio_adj":0.1,"new_slot_Create_Ratio":1,"new_slot_Create_Ratio_adj":0,"new_addBidAsk_Create_Ratio":18,
        //"new_addBidAsk_Create_Ratio_adj":0.1,"restart_flag":3,"restart_base_price":8300,"limit_invest_coin":1000,"limit_invest_KRW":10000000,"minimum_order_KRW":500,"minimum_order_coin":0.1}
        user_config['trade_mode'] = getListBox_values("mode"+instance);
        user_config['restart_flag'] = getListBox_values("algorithm"+instance) * 1;
        user_config['restart_base_price'] = getInputBox_values("base_price"+instance);
        user_config['control_mode'] = getListBox_values("status"+instance);
        user_config['check_period'] = getInputBox_values("period"+instance);

        user_config['new_slot_Create_Ratio'] = getInputBox_values("newslot_ratio"+instance);
        user_config['new_addBidAsk_Create_Ratio'] = getInputBox_values("bidask_ratio"+instance);
        user_config['target_BidAsk_Ratio'] = getInputBox_values("target_ratio"+instance);
        user_config['max_slot_cnt'] = getInputBox_values("max_slot_cnt"+instance);
        user_config['max_addBidAsk_cnt'] = getInputBox_values("max_bidask_cnt"+instance);
        user_config['limit_invest_KRW'] = getInputBox_values("limit_KRW"+instance);
        user_config['limit_invest_coin'] = getInputBox_values("limit_Coin"+instance);

        user_config['slot_BidAsk_KrwCoin'][0] = getInputBox_values("amount0_"+instance);
        user_config['slot_BidAsk_KrwCoin'][1] = getInputBox_values("amount1_"+instance);
        user_config['slot_BidAsk_KrwCoin'][2] = getInputBox_values("amount2_"+instance);
        user_config['slot_BidAsk_KrwCoin'][3] = getInputBox_values("amount3_"+instance);
        user_config['slot_BidAsk_KrwCoin'][4] = getInputBox_values("amount4_"+instance);
        user_config['slot_BidAsk_KrwCoin'][5] = getInputBox_values("amount5_"+instance);
        user_config['slot_BidAsk_KrwCoin'][6] = getInputBox_values("amount6_"+instance);
        user_config['slot_BidAsk_KrwCoin'][7] = getInputBox_values("amount7_"+instance);
        user_config['slot_BidAsk_KrwCoin'][8] = getInputBox_values("amount8_"+instance);
        user_config['slot_BidAsk_KrwCoin'][9] = getInputBox_values("amount9_"+instance);

        console.log("usr_config", instance, "  = ", user_config);

        for(key in cur_config)
        {
            if(key == 'slot_BidAsk_KrwCoin')
            {
                for(i = 0; i < cur_config[key].length; i++)
                {
                    console.log("key = ", key, "index = ", i, " Org = ", cur_config[key][i], " User = ", user_config[key][i]);
                    if(cur_config[key][i] != user_config[key][i]) { NeedtoUpdate = true; console.log("Data is changed................... = ", key)}
                }
            }
            else
            {
                console.log("key = ", key, " Org = ", cur_config[key], " User = ", user_config[key]);
                if(cur_config[key] != user_config[key]) { NeedtoUpdate = true; console.log("Data is changed................... = ", key)}
            }
        }

        if(NeedtoUpdate) 
        {
            console.log("Data is changed...................") 
            Update_ConfigParam(config_filename[market][marketID], user_config); 
        }
    }

    
    /*
    Button Click Handler.......
    */
    function Pfapply_ButtonClickhandler(self, ID)
    {
        console.log(" Pfapply_ButtonClickhandler = ", self);
        console.log("Button ID = ", ID);
        let instance = ID.replace("pfapplyBtn", "");
        instance = instance*1;
        let marketlist = Object.keys(pf);
        console.log("marketlist = ", marketlist, " instance = ", instance);
        let instance_name = marketlist[instance-1];
        console.log("instance_name =", instance_name);
        let market = instance_name.split('_')[0];
        let marketID = instance_name.split('_')[1];
    }


    /*
    Button Click Handler.......
    */
    function TrDetailView_ButtonClickhandler(self, ID)
    {
        console.log("TrDetailView_ButtonClickhandler = ", self);
        console.log("Button ID = ", ID);
        let instance = ID.replace("TradingDetailBtn", "");
        instance = instance*1;
        let marketlist = Object.keys(pf);
        console.log("marketlist = ", marketlist, " instance = ", instance);
        let instance_name = marketlist[instance-1];
        console.log("instance_name =", instance_name);
        let market = instance_name.split('_')[0];
        let marketID = instance_name.split('_')[1];
        $("#TradingDetail_body").empty();
        Create_TradingDetailTable("TradingDetail_body", market, marketID);
    }


    function NetIncomDetailView_ButtonClickhandler(self, ID)
    {
        console.log("NetIncomDetailView_ButtonClickhandler = ", self);
        console.log("Button ID = ", ID);
        let instance = ID.replace("NetIncomeDetailBtn", "");
        instance = instance*1;
        let marketlist = Object.keys(pf);
        console.log("marketlist = ", marketlist, " instance = ", instance);
        let instance_name = marketlist[instance-1];
        console.log("instance_name =", instance_name);
        let market = instance_name.split('_')[0];
        let marketID = instance_name.split('_')[1];
        $("#IncomeDetail_body").empty();

        Create_IncomeDetailTable("IncomeDetail_body", market, marketID);
    }



    /*
    Button Click Handler.......
    */
    function ButtonClickhandler(self, ID)
    {
        console.log(" ButtonClickhandler = ", self);
        console.log("Button ID = ", ID);
        let instance = ID.replace("apply_cfg_Btn", "");
        instance = instance*1;
        let marketlist = Object.keys(pf);
        console.log("marketlist = ", marketlist, " instance = ", instance);
        let instance_name = marketlist[instance-1];
        console.log("instance_name =", instance_name);
        let market = instance_name.split('_')[0];
        let marketID = instance_name.split('_')[1];
    }

    /*
    text input box
    <div id = "text field example">
        Text field Input : <input type="text" id="msginput", name="member_name" value="text를 입력하세요...">
        Text field Input : <input type="number" id="msginput", name="member_name" value="text를 입력하세요...">
    </div>
    */
    function makeInputBox(ParentID, ID, type, defaultstr, classID, style, min, max, step, callback)
    {
        var Obj = $('<div><input>');
        Obj.find('input').attr("type", type).attr("id", ID).attr("class", classID).attr("style", style).val(defaultstr);
        if(type === "number") 
        { 
            Obj.find('input').attr('min', min).attr('max', max).attr('step', step);
            //Obj.find('input').bind("keyup", function() { return callback(this, min, max); });
            Obj.find('input').bind("focusout", function() { return callback(this, min, max); });
        }
        $(ParentID).append(Obj);
    }


    function InputBoxHandler(self, min, max)
    {
        //console.log("InputBoxHandler = ", self);
        if(self.value < min ) { self.value = min; console.log("force fix min value"); }
        if(self.value > max ) { self.value = max; console.log("force fix max value"); }
    }



    /*
    get value from inputbox....
    */
    function getInputBox_values(id) 
    {
        console.log("id = ", id);
        id = "#" + id;
        let Obj = $(id)
        console.log(Obj);
        console.log("Input Box value is ", Obj[0].value);
        return Obj[0].value * 1;
    }



    function Update_ConfigParam(filename, config)
    {
        console.log("filename = ", filename, "config = " , config);
        let senddata = { name : filename, cfg : config };

        let settings = {
            async : true,
            crossDomain : true,
            url : "http://192.168.123.100:7000/config/updatecfg",
            method : "POST",
            headers : {
                "Content-Type": "application/json",
            },
            data : JSON.stringify(senddata), 
            success : function (result) { console.log(" upload suceess!!! = ", result); },
            error : function (error) { console.log(" upload fail!!! = ", error); }
        }

        $.ajax(settings).done(function (response) {
            console.log("Respones... : ", response);
        });
    }

    
    function Update_ConfigParamDB(modifed_config)
    {
        let ConfigParams = 
        { 
            max_slot_cnt : 0,
            slot_1st_Bid_KRW : 0, 
            slot_2nd_Bid_KRW : 0, 
            check_period : 0,
            retry_cnt : 0,
            retry_delaysec : 0,
            target_rate : 0,
            target_rate_adj : 0,
            new_slot_create_ratio : 0,
            new_slot_create_ratio_adj : 0,
            max_add_bid_cnt : 0,
            status : 0,
        };
        
        let index = ID.replace("submitBtn", '');
        let keyID = getListBox_values("portf"+index);
        console.log("keyID = ", keyID);
        ConfigParams['max_slot_cnt'] = getListBox_values("slotcnt"+index);
        ConfigParams['slot_1st_Bid_KRW'] = getInputBox_values("firstbidKRW"+index);
        ConfigParams['slot_2nd_Bid_KRW'] = getInputBox_values("secondbidKRW"+index);
        ConfigParams['check_period'] = getInputBox_values("checkperiod"+index);
        ConfigParams['retry_cnt'] = getInputBox_values("retrycnt"+index);
        ConfigParams['retry_delaysec'] = getInputBox_values("retry_delaysec"+index);
        ConfigParams['target_rate'] = getInputBox_values("target_rate"+index);
        ConfigParams['target_rate_adj'] = getInputBox_values("target_rate_ajd"+index);
        ConfigParams['new_slot_create_ratio'] = getInputBox_values("new_slot_create_ratio"+index);
        ConfigParams['new_slot_create_ratio_adj'] = getInputBox_values("new_slot_create_ratio_adj"+index);
        ConfigParams['max_add_bid_cnt'] = getInputBox_values("max_add_bid_cnt"+index);
        //ConfigParams['status'] = getListBox_values("status"+index);

        let jsonObj = { };
        let indexID = "ID" + index;
        jsonObj[keyID] = { };
        jsonObj[keyID][indexID] = { 'marketID' : keyID + "_" + indexID, inserted_at : 0, config : ConfigParams };
        console.log("jsonObj = ", JSON.stringify(jsonObj));

        let CRUD_url = "";
        let CRUD_method = "";
        if(index == 7) // PUT : update
        {
            CRUD_url = "http://10.186.115.57:7000/config/post";
            CRUD_method = "PUT"
        }
        else
        {
            CRUD_url = "http://10.186.115.57:7000/config/update";
            CRUD_method = "PUT"
        }

        let settings = {
            async : true,
            crossDomain : true,
            url : CRUD_url,
            method : CRUD_method,
            headers : {
                "Content-Type": "application/json",
            },
            //data : JSON.stringify(ConfigParams), 
            data : JSON.stringify(jsonObj), 
            success : function (result) { console.log("CRUD_Index] = ", index, " upload suceess!!! = ", result); },
            error : function (error) { console.log("CRUD_Index] = ", index, " upload fail!!! = ", error); }
        }

        $.ajax(settings).done(function (response) {
            console.log("Respones... : ", response);
        });
    }

    
    function get_ConfigParam(filename)
    {
        var settings = {
            "async": true,
            "crossDomain": true,
            "url": "http://192.168.123.100:7000/config/configparam",
            "method": "GET",
            "headers": {
                "Content-Type": "application/x-www-form-urlencoded",
                "cache-control": "no-cache",
            },
            data : { 'configfile' : filename },
            /*
            success : function (data) { console.log("ajax success : config filename = ", filename, " data = ", data); },
            error : function (error) { console.log("ajax error = ", error); },
            complete  : function (data) { console.log("ajax complete = ", data);  },
            */
        }

        return new Promise(function (resolve, reject)
        {
            $.ajax(settings).done(function (response) {
                console.log("ajax done : config filename = ", filename, " param = ", response);
                resolve(JSON.parse(response));
            }).fail(function(error) {
                console.log("ajax fail = ", error);
                reject(JSON.parse(error));
            }).always(function (data) { 
                 //console.log("ajax always = ", data); 
            })
        });
    }

    
    function get_Balance()
    {
        var settings = {
            "async": true,
            "crossDomain": true,
            "url": "http://192.168.123.100:7000/config/balance",
            "method": "GET",
            "headers": {
                "Content-Type": "application/x-www-form-urlencoded",
                "cache-control": "no-cache",
            },
            data : { 
                'market' : "KRW",
                'marketID' : "ID1",
                'trade_mode' : "normal" 
            },
            /*
            success : function (data) { console.log("ajax success : portfolio filename = ", filename, " data = ", data); },
            error : function (error) { console.log("ajax error = ", error); },
            complete  : function (data) { console.log("ajax complete = ", data);  },
            */
        }

        return new Promise(function (resolve, reject)
        {
            $.ajax(settings).done(function (response) {
                console.log("ajax get_Balance done : param = ", response);
                resolve(JSON.parse(response));
            }).fail(function(error) {
                console.log("ajax get_Balance fail = ", error);
                reject(JSON.parse(error));
            }).always(function (data) { 
                 console.log("ajax get_Balance always = ", data); 
            })
        });
    }


    function get_PortfolioLists(filename)
    {
        var settings = {
            "async": true,
            "crossDomain": true,
            "url": "http://192.168.123.100:7000/config/portfoliolists",
            "method": "GET",
            "headers": {
                "Content-Type": "application/x-www-form-urlencoded",
                "cache-control": "no-cache",
            },
            data : { 'filename' : filename },
            /*
            success : function (data) { console.log("ajax success : portfolio filename = ", filename, " data = ", data); },
            error : function (error) { console.log("ajax error = ", error); },
            complete  : function (data) { console.log("ajax complete = ", data);  },
            */
        }

        return new Promise(function (resolve, reject)
        {
            $.ajax(settings).done(function (response) {
                console.log("ajax done : portfolio filename = ", filename, " param = ", response);
                resolve(JSON.parse(response));
            }).fail(function(error) {
                console.log("ajax portfoliolists fail = ", error);
                reject(JSON.parse(error));
            }).always(function (data) { 
                 console.log("ajax portfoliolists always = ", data); 
            })
        });
    }


    
    function get_TradingSummary(market, marketID, trade_mode)
    {
        var settings = {
            "async": true,
            "crossDomain": true,
            "url": "http://192.168.123.100:7000/config/tradingsummary",
            "method": "GET",
            "headers": {
                "Content-Type": "application/x-www-form-urlencoded",
                "cache-control": "no-cache",
            },
            data : { 
                'market' : market,
                'marketID' : marketID,
                'trade_mode' : trade_mode 
            },
            /*
            success : function (data) { console.log("ajax success : portfolio filename = ", filename, " data = ", data); },
            error : function (error) { console.log("ajax error = ", error); },
            complete  : function (data) { console.log("ajax complete = ", data);  },
            */
        }

        return new Promise(function (resolve, reject)
        {
            $.ajax(settings).done(function (response) {
                console.log("ajax done : param = ", response);
                resolve(JSON.parse(response));
            }).fail(function(error) {
                console.log("ajax Trading Summary fail = ", error);
                reject(JSON.parse(error));
            }).always(function (data) { 
                 console.log("ajax Trading Summary always = ", data); 
            })
        });
    }

    function get_TradingDetailInfo(market, marketID, trade_mode)
    {
        var settings = {
            "async": true,
            "crossDomain": true,
            "url": "http://192.168.123.100:7000/config/tradingdetaillist",
            "method": "GET",
            "headers": {
                "Content-Type": "application/x-www-form-urlencoded",
                "cache-control": "no-cache",
            },
            data : { 
                'market' : market,
                'marketID' : marketID,
                'trade_mode' : trade_mode 
            },
            /*
            success : function (data) { console.log("ajax success : portfolio filename = ", filename, " data = ", data); },
            error : function (error) { console.log("ajax error = ", error); },
            complete  : function (data) { console.log("ajax complete = ", data);  },
            */
        }

        return new Promise(function (resolve, reject)
        {
            $.ajax(settings).done(function (response) {
                console.log("ajax Trading Detail Info done : param = ", response);
                resolve(JSON.parse(response));
            }).fail(function(error) {
                console.log("ajax Trading Detail Info fail = ", error);
                reject(JSON.parse(error));
            }).always(function (data) { 
                 console.log("ajax Trading Detail Info always = ", data); 
            })
        });
    }


    function get_NetIncomeSummary(market, marketID, trade_mode)
    {
        var settings = {
            "async": true,
            "crossDomain": true,
            "url": "http://192.168.123.100:7000/config/netincomesummary",
            "method": "GET",
            "headers": {
                "Content-Type": "application/x-www-form-urlencoded",
                "cache-control": "no-cache",
            },
            data : { 
                'market' : market,
                'marketID' : marketID,
                'trade_mode' : trade_mode 
            },
            /*
            success : function (data) { console.log("ajax success : portfolio filename = ", filename, " data = ", data); },
            error : function (error) { console.log("ajax error = ", error); },
            complete  : function (data) { console.log("ajax complete = ", data);  },
            */
        }

        return new Promise(function (resolve, reject)
        {
            $.ajax(settings).done(function (response) {
                console.log("ajax NetIncom Summary done : param = ", response);
                resolve(JSON.parse(response));
            }).fail(function(error) {
                console.log("ajax NetIncom Summary fail = ", error);
                reject(JSON.parse(error));
            }).always(function (data) { 
                 console.log("ajax NetIncom Summary always = ", data); 
            })
        });
    }

    function get_NetIncomeDetailInfo(market, marketID, trade_mode)
    {
        var settings = {
            "async": true,
            "crossDomain": true,
            "url": "http://192.168.123.100:7000/config/netincomedetaillist",
            "method": "GET",
            "headers": {
                "Content-Type": "application/x-www-form-urlencoded",
                "cache-control": "no-cache",
            },
            data : { 
                'market' : market,
                'marketID' : marketID,
                'trade_mode' : trade_mode 
            },
            /*
            success : function (data) { console.log("ajax success : portfolio filename = ", filename, " data = ", data); },
            error : function (error) { console.log("ajax error = ", error); },
            complete  : function (data) { console.log("ajax complete = ", data);  },
            */
        }

        return new Promise(function (resolve, reject)
        {
            $.ajax(settings).done(function (response) {
                console.log("ajax NetIncom Detail Info done : param = ", response);
                resolve(JSON.parse(response));
            }).fail(function(error) {
                console.log("ajax NetIncom Detail Info fail = ", error);
                reject(JSON.parse(error));
            }).always(function (data) { 
                 console.log("ajax NetIncom Detail Info always = ", data); 
            })
        });
    }

</script>

